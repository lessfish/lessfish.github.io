(this["webpackJsonpreact-simple-template"]=this["webpackJsonpreact-simple-template"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var l=n(0),i=n.n(l),a=n(7),s=n.n(a),c=(n(43),n(44),n(36)),r=n(66),o=n(37),h=(n(45),n(4));const u="turntableOptions";var d=()=>{const[e,t]=Object(l.useState)(""),[n,i]=Object(l.useState)([]),[a,s]=Object(l.useState)(!1),[d,f]=Object(l.useState)(""),[g,m]=Object(l.useState)(0),[b,j]=Object(l.useState)(0),[p,x]=Object(l.useState)(null),O=Object(l.useRef)(null),v=Object(l.useRef)(null);Object(l.useEffect)((()=>{const e=e=>{const t=document.activeElement;"TEXTAREA"===t.tagName||"INPUT"===t.tagName||(null===p||a)&&"Space"===e.code&&(e.preventDefault(),F())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[a,p,n.length]);Object(l.useEffect)((()=>{const e=localStorage.getItem(u);if(e){t(e);const n=e.split("\n").filter((e=>""!==e.trim()));i(n)}}),[]),Object(l.useEffect)((()=>{const e=O.current;if(e){const t=e.getContext("2d"),n=window.devicePixelRatio||1,l=e.getBoundingClientRect();e.width=l.width*n,e.height=l.height*n,t.scale(n,n)}w()}),[n,g]),Object(l.useEffect)((()=>{e?localStorage.setItem(u,e):localStorage.removeItem(u)}),[e]),Object(l.useEffect)((()=>{if(a){let e=b;const t=()=>{let n=.02;e<5?n=.01:e<10&&(n=.015),e+=n,e>15&&(e=15),j(e),m((t=>(t+e)%360)),v.current=requestAnimationFrame(t)};v.current=requestAnimationFrame(t)}else if(null!==p){let e=b;const t=()=>{let n=(p-g+360)%360;n>180&&(n-=360);const l=Math.min(.003*(1+Math.abs(n)/600),.015);let i=e*l;if(i=Math.max(i,8e-4),e-=i,e<=.015)return j(0),x(null),y(g),void cancelAnimationFrame(v.current);j(e),m((t=>(t+e)%360)),v.current=requestAnimationFrame(t)};v.current=requestAnimationFrame(t)}return()=>cancelAnimationFrame(v.current)}),[a,p,b,g]);const w=()=>{const e=O.current;if(!e)return;const t=e.getContext("2d"),l=(e.style.width?parseInt(e.style.width,10):e.width/(window.devicePixelRatio||1))/2,i=(e.style.height?parseInt(e.style.height,10):e.height/(window.devicePixelRatio||1))/2,a=Math.min(l,i)-24;if(t.clearRect(0,0,e.width,e.height),0===n.length)return t.font="bold ".concat(18,"px Arial"),t.textAlign="center",t.fillStyle="#7f8c8d",void t.fillText("\u8bf7\u8f93\u5165\u76f2\u76d2\u9009\u9879",l,i);const s=2*Math.PI/n.length,c=["#FF6B81","#FFD93D","#6BCB77","#4D96FF","#FF6FF2","#38E4AE","#FF8C32","#845EC2","#FFC75F","#F9F871","#00C9A7","#F14668","#00B8A9","#FF9671","#B983FF"];let r=null;t.save(),t.translate(l,i),t.rotate(g*Math.PI/180),n.forEach(((e,l)=>{const i=l*s,o=(l+1)*s;t.beginPath(),t.moveTo(0,0),t.arc(0,0,a,i,o),t.closePath();let h=l%c.length,u=c[h];n.length>1&&u===r&&c.length>1&&(h=(h+1)%c.length,u=c[h]),t.fillStyle=u,r=u,t.fill(),t.save(),t.rotate(i+s/2),t.textAlign="right",t.textBaseline="middle";const[d,f,g]=function(e){const t=e.replace("#","");return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]}(u),m=function(e,t,n){return.299*e+.587*t+.114*n}(d,f,g);t.fillStyle=m<160?"#fff":"#222";let b=Math.min(22,a/n.length*2.5);n.length>6&&(b=Math.min(18,a/n.length*2.2)),n.length>10&&(b=Math.min(15,a/n.length*2.1)),t.font="bold ".concat(b,'px "Helvetica Neue", Helvetica, Arial, sans-serif');const j=Math.floor(a/b*1.5),p=e.length>j?e.substring(0,j-2)+"...":e;t.fillText(p,a-30,0),t.restore()})),t.restore(),t.save(),t.translate(l,i),t.beginPath(),t.moveTo(a-24,0),t.lineTo(a+16,-10),t.lineTo(a+16,10),t.closePath(),t.fillStyle="#e74c3c",t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=8,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fill(),t.restore()},F=()=>{if(0!==n.length)if(a){s(!1);const e=Math.floor(Math.random()*n.length),t=360/n.length;x((0-(e*t+t/2)+360)%360)}else s(!0),f(""),j(0);else c.a.warning("\u8bf7\u8f93\u5165\u76f2\u76d2\u9009\u9879\uff01")},y=e=>{if(0===n.length)return;const t=360/n.length,l=(0-e+720)%360;let i=0;for(let a=0;a<n.length;a++){if(l>=a*t&&l<(a+1)*t){i=a;break}}f("\u606d\u559c\u4f60\u62bd\u4e2d\uff1a".concat(n[i])),c.a.success("\u606d\u559c\u4f60\u62bd\u4e2d\uff1a".concat(n[i]))};return Object(h.jsxs)("div",{className:"turntable-container",children:[Object(h.jsx)("h1",{children:"\u76f2\u76d2\u5927\u6311\u6218"}),Object(h.jsxs)("div",{className:"main-layout-wrapper",children:[Object(h.jsx)("div",{className:"turntable-wrapper",children:Object(h.jsx)("canvas",{ref:O,width:"500",height:"500",className:"turntable-canvas",style:{width:"500px",height:"500px"}})}),Object(h.jsxs)("div",{className:"controls",children:[Object(h.jsxs)("div",{className:"input-section",children:[Object(h.jsx)("h3",{style:{marginBottom:"8px",color:"#333",marginTop:0},children:"\u76f2\u76d2\u9009\u9879\u8bbe\u7f6e"}),Object(h.jsx)("div",{style:{color:"#666",fontSize:"14px",marginBottom:"12px"},children:"\u8bf7\u8f93\u5165\u76f2\u76d2\u9009\u9879\uff0c\u6bcf\u884c\u4e00\u4e2a\u9009\u9879"}),Object(h.jsx)(r.a.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u76f2\u76d2\u9009\u9879\uff0c\u6bcf\u884c\u4e00\u4e2a",value:e,onChange:e=>{t(e);const n=e.split("\n").filter((e=>""!==e.trim()));i(n),f(""),m(0)},rows:20,style:{width:350,marginBottom:20,height:400},disabled:a||null!==p})]}),Object(h.jsx)(o.a,{type:"primary",onClick:F,style:{width:120,height:40,fontSize:"16px"},loading:null!==p&&!a,disabled:null!==p&&!a,children:a?"\u505c\u6b62":null!==p?"\u51cf\u901f\u4e2d...":"\u5f00\u59cb"}),Object(h.jsx)("div",{className:"keyboard-tip",style:{marginTop:"8px",color:"#666",fontSize:"14px"},children:"\u63d0\u793a\uff1a\u6309\u7a7a\u683c\u952e\u4e5f\u53ef\u4ee5\u5f00\u59cb/\u505c\u6b62"})]})]}),Object(h.jsx)("div",{className:"result-display ".concat(d?"has-result":""),children:Object(h.jsx)("h2",{children:d||""})})]})};var f=function(){return Object(h.jsx)("div",{className:"App-container",children:Object(h.jsx)(d,{})})};n(63);s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.7f9e1611.chunk.js.map